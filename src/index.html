<!doctype html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8" />
<meta http-equiv="x-ua-compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<title>Rocket Dog Home</title>

<link rel="stylesheet" href="../styles.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/motion-ui/1.2.3/motion-ui.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/css/foundation-prototype.min.css">
<link href='https://cdnjs.cloudflare.com/ajax/libs/foundicons/3.0.0/foundation-icons.css' rel='stylesheet' type='text/css'>
<link rel="apple-touch-icon-precomposed" sizes="57x57" href="assets/icons/apple-touch-icon-57x57.png" />
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/icons/apple-touch-icon-114x114.png" />
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/icons/apple-touch-icon-72x72.png" />
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/icons/apple-touch-icon-144x144.png" />
<link rel="apple-touch-icon-precomposed" sizes="60x60" href="assets/icons/apple-touch-icon-60x60.png" />
<link rel="apple-touch-icon-precomposed" sizes="120x120" href="assets/icons/apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon-precomposed" sizes="76x76" href="assets/icons/apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon-precomposed" sizes="152x152" href="assets/icons/apple-touch-icon-152x152.png" />
<link rel="icon" type="image/png" href="assets/icons/favicon-196x196.png" sizes="196x196" />
<link rel="icon" type="image/png" href="assets/icons/favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/png" href="assets/icons/favicon-32x32.png" sizes="32x32" />
<link rel="icon" type="image/png" href="assets/icons/favicon-16x16.png" sizes="16x16" />
<link rel="icon" type="image/png" href="assets/icons/favicon-128.png" sizes="128x128" />
<meta name="application-name" content="Rocket Doggie"/>
<meta name="msapplication-TileColor" content="#FFFFFF" />
<meta name="msapplication-TileImage" content="assets/icons/mstile-144x144.png" />
<meta name="msapplication-square70x70logo" content="assets/icons/mstile-70x70.png" />
<meta name="msapplication-square150x150logo" content="assets/icons/mstile-150x150.png" />
<meta name="msapplication-wide310x150logo" content="assets/icons/mstile-310x150.png" />
<meta name="msapplication-square310x310logo" content="assets/icons/mstile-310x310.png" />

<body>

<div class="grid-container">
    
    <div class="grid-x grid-margin-y">
        <div class="cell">
            <h1 class="text-center ">Dog's Seeking Homes</h1>
        </div>     
    </div>
    
    <div class="grid-x grid-margin-y">
        <div class="cell">

            <table class="responsive-card-table unstriped">
                
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Petfinder ID</th>
                        <th>Name</th>
                    </tr>
                </thead>
                
                <tbody></tbody>

            </table>

        </div>
    </div>
</div>

<script
src="https://code.jquery.com/jquery-3.6.1.min.js"
integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
crossorigin="anonymous"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.4.3/js/foundation.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/motion-ui/1.2.3/motion-ui.min.js"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.1.3/axios.min.js"></script>

<script>
$(document).foundation();
</script>

<script src="petfinder.min.js"></script>

<script>

const client = new petfinder.Client({ apiKey:"LvnDb2AAPPYWUFL9XzVeCvFPtI0PYWf3RLOcaoKBBFfwj3LQmj", secret: "MWAVSxwhNM77LIIRXJovCaX0X7ikNdiXaRTTir7b" });

async function showAnimals( animalType, searchBreed ) {

  let page = 1;

  do {
    apiResult = await client.animal.search({
      type: animalType,
      breed: searchBreed,

      page,
      limit: 100,
    });

    let dogIdx = (page - 1) * 100;
    let allDogs = [];
    apiResult.data.animals.forEach(function(animal) {
        
        $( `<tr>` + `<td data-label="#">` + `${++dogIdx}` + `</td>` + `<td data-label="Petfinder ID">` + `${animal.id}` + `</td>` +  `<td data-label="Name">` +  `<a href="${animal.url}">${animal.name}</a>` + `</td>`  + `</tr>` ).appendTo('tbody');
        
        // console.log(` -- ${++dogIdx}: ${animal.name} id: ${animal.id} url: ${animal.url}`);

    });

    page++;

  } while( apiResult.data.pagination && apiResult.data.pagination.total_pages >= page );
}

(async function() {

  await showAnimals( "Dog", "Pit Bull Terrier" );

})();

</script>

</body>
</html>
